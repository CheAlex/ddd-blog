services:

    # Infrastructure

    blog.domain.infrastructure.doctrine.factory:
        class: Blog\DomainBundle\Infrastructure\Doctrine\DoctrineFactory
        arguments: [@doctrine]

    # Repositories

    blog.domain.repository.user:
        class: Blog\DomainBundle\Infrastructure\IRepository
        factory_service: blog.domain.infrastructure.doctrine.factory
        factory_method: createUserRepository
        public: false

    blog.domain.repository.post:
        class: Blog\DomainBundle\Infrastructure\IRepository
        factory_service: blog.domain.infrastructure.doctrine.factory
        factory_method: createPostRepository
        public: false

    blog.domain.unit_of_work:
        class: Blog\DomainBundle\Infrastructure\IUnitOfWork
        factory_service: blog.domain.infrastructure.doctrine.factory
        factory_method: createUnitOfWork
        public: false

    # Services

    blog.domain.service.user:
        class: Blog\DomainBundle\Service\UserService
        arguments: [@blog.domain.unit_of_work, @blog.domain.repository.user]

    blog.domain.service.post:
        class: Blog\DomainBundle\Service\PostService
        arguments: [@blog.domain.unit_of_work, @blog.domain.repository.post]
